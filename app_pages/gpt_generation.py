import streamlit as st

###########################
### –ü–∏—à–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Ä–∞–±–æ—Ç—ã –ì–ü–¢
###########################
from funcs.try_gpt import ask_gigachat

def run():
    ###########################
    ### –ë–ª–æ–∫ –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    ###########################
    st.subheader('–ü—Ä–∏–≤–µ—Ç, –ø—É—Ç–Ω–∏–∫! –ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç—ã –Ω–∞–π–¥—ë—à—å –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤—Å–µ —Å–≤–æ–∏ –∑–∞–ø—Ä–æ—Å—ã –∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è –ø–æ —Ñ–∏–ª—å–º–∞–º, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Å—è, –∑–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å –Ω–∏–∂–µ!')
    
    user_text = st.text_input('–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ñ–∏–ª—å–º')
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
    left, middle, right = st.columns(3)
    if middle.button('–°–º–æ—Ç—Ä–µ—Ç—å —Ñ–∏–ª—å–º', icon="üëÄ", use_container_width=True):
        if user_text:  # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –Ω–µ –ø—É—Å—Ç–æ–µ
            resp = ask_gigachat(user_text)
            st.write('–ü—Ä–µ–¥–ª–∞–≥–∞—é –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∞–º —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∏–ª—å–º—ã:')
            st.markdown(f"""
                <h2 style='text-align: center; color:#3262a8; font-size: 30px; font-weight: bold; padding: 10px; border-radius:10px;'>
                {resp}
                </h2>
                """, unsafe_allow_html=True)
        else:
            st.warning("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ñ–∏–ª—å–º.")